---
sidebar_position: 2
---

# TLS Tunnel

ุฏุฑ ุตูุญู ูุจู ุชุงูู ูพูุฑุช ุจู ูพูุฑุช ุฑู ุฏุฏูุโ ุงูู ุชุงูู ุจุง ุงูฺฉู ุชุงูู ุฎูุจ ูุณุช ูู ุฎูุจ ุฎู ูู ุณุงุฏู ูุณุช ู ุงุญุชูุงู ููุชุฑ ุดุฏูุด ูู ุจุณุชู ุจู ุฏุชุง ุณูุชุฑูุง ููฺฉูู ุจุงูุง ุจุงุดู ุจุฑุง ููู ูุงู ุฑู ู ฺุฒ ุณูุงุฑ ูฺฉูู ุจู ุงุณู tls 

ุฏูุณุชุงู ฺฉู ุณุฑูุฑ ุฎุงุฑุฌ ูุชุฒูุฑ ุฏุงุฑู ู ุฑู ุชุงูู ูุง ูุนฺฉูุณ ูุดฺฉู ุณุฑุนุช ุฏุงุฑู ุงู ุฑูุด ุฎู ุนุงู ุฌูุงุจ ูุฏู ูพุณ ุญุชูุง ุชุณุช ฺฉูุฏ

ุทุจู ุชุฌุฑุจุงุช ุ ุงู ููุน ุชุงูู ููฺฉูู ููุชุฑ ุจุดู ุงฺฏู ูููุทูุฑ ุนุงุฏ ุงุณุชูุงุฏู ุจุดู ุ ุงูุจุชู ูุฏุช ูุง ุฒุงุฏ ูุฏูุง ุจุฏูู ูุดฺฉู ฺฉุงุฑ ูฺฉุฑุฏ ุงูุง ุงุฒ ฺูุฏ ูุงู ูุจู ูุงุฑูุงู ุงุฑุงู ุจุฑูุฒ ุดุฏ ู ุงู ุชุงูู ุฑู ุจูุงฺฉ ูฺฉูู ุงฺฏู ฺฉุงุฑุจุฑ ุฑูุด ุฒุงุฏ ุจูุชู ฺูู ุจุฑุง ูุฑ ฺฉุงูฺฉุดู ฺฉุงุฑุจุฑ ุ ุงู ุชููู ูู ฺฉ ฺฉุงฺฉูุดู ุจุง ููุฏุดฺฉ Tls ุงุฌุงุฏ ู ฺฉูุฏ

ููุงุฑุฏ ฺฉู ู ุชูุงูุฏ ุงูุฌุงู ุฏูุฏ ุชุง ุฌูู ููุชุฑ ุดุฏู ุฑู ุจฺฏุฑุฏุ ุงููู ฺฉุงุฑ ุงุณุชูุงุฏู ุงุฒ ูุงฺฉุณ ูุณุช ฺฉู ุฏุฑ ุตูุญู http2 ุฎูุงูู ฺฏูุช ฺุทูุฑ ูุณุช ุงุฌุงุฏ ฺฉุฑุฏูุด

ูุฑุญูู ุฏูู ูู ุงูู ฺฉู ุฏุฑ OpenSSLServer ฺฉ ุขูพุดู ูุณุช ฺฉู ุจู ุงู ุดฺฉู ูุนุงูุด ฺฉูุฏ ุ

```json
"anti-tls-in-tls":true
```
ุฏุงุฎู json ุงุด ูุฑุงุฑ ุจุฏุฏ ุชู setting

ุงู ฒ ุนูู ุงุญุชูุงู ููุชุฑ ุดุฏู ุฑุง ุดุงุฏ ูุฒุฏฺฉ ุจู ุตูุฑ ู ฺฉููุ ููฺูู ุงู ุฑูุด ุชุงูู ุจุฑุง ฺฉุงูุด ููุฏ ุดฺฉ ุชุงู ุจูุชุฑู ฺฉู ุชุฑฺฉุจ ุจุดู ุจุง preconnect ฺฉู ุฏุฑ ุตูุญู ุจุนุฏ ฺฏูุชู ฺุทูุฑ ุงุถุงูู ูุดู

## ุฏุงููู

ุจุฑุง ุงูฺฉู ุชุงูู tls ุงูุฌุงู ุจุดู ูุงุฒ ุจู ุฏุงููู ูุณุช ุ ุฏุงููู ูุงุฑู ูุนูููุง ุจุง ููุช ูุง ูุฎุชูู ูุฎุฑู ู ุงุฑุฒูู ุชุฑูุด ูู ir ูุณุช ฺฉู ุจุฑุง ุงูฺฉุงุฑ ููุงุณุจ ูู ูุณุช ููฺูู ุจุนุถ ุณุงุช ูุง ุณุงุจ ุฏุงููู ุฑุงฺฏุงู ูุฏู ุ ุงุฒ ุงูู ูุง ูู ูุชููุฏ ุงุณุชูุงุฏู ฺฉูุฏ ู ุณุงุจ ุฏุงููู ุฑุงฺฏุงู ุจฺฏุฑุฏ

ููฺูู ุฏุฑููุฑุฏ ุฏุงููู ir ุจุนุถ ูุง ูฺฏุฑุงู ุจูุฏูุฏ ฺฉู ููฺฉูู ุฏุณุชฺฏุฑ ุจุดู ุง ฺูุฏููู ฺฏุฑ ุจุฏูุ ุฎุงูุชูู ุฑุงุญุช ุงุตูุง ฺูู ฺุฒ ูุณุช ู ูุฏุช ูุงุณุช ุฎูุฏู ุจู ุฑูุด ูุง ูุฎุชูู ุงุณุชูุงุฏู ฺฉุฑุฏู ุงู ู ูฺฉูู


## ุณุฑุชูฺฉุช



ฺฉู ุงููุฒุด ูุงุด ูู ุชูููุจ ูุฑุงูุงู ูุณุช ูู ูุชู ูุง ูุณุชูุ ุงูุง ุฎูุงุตู ุจุฎูุงู ุจฺฏู ุ ุฏุงููู ุฑู ุจุฏูู ุฑูุดู ฺฉุฑุฏู ูพุฑูฺฉุณ ฺฉููุฏ ุง ูฺ ฺฉุงุฑ ุฎุงุต ุ ูพุดุชุด ุงูพ ู ุณุฑูุฑ ูุฑุงุฑ ูุฏุฏ ฺฉู ุนู ู ุฑฺฉูุฑุฏ dns ุงุฒ ููุน A ูุณุงุฒุฏ ู ุงูพ ุณุฑูุฑุชูู ุฑู ูุงุฑุฏ ูฺฉูุฏ

ุจุนุฏ ุฑู ุงูู ุณุฑูุฑ ฺฉู ุงูพ ุงุด ูุงุฑุฏ ุดุฏู ุ ุฏุฑุฎูุงุณุช ฺฏุฑูุชู ุณุฑุชูฺฉุช ุฑู ุตุงุฏุฑ ูฺฉูุฏ ุจู ุงู ุตูุฑุช


```sh
apt-get install certbot
```

```sh
sudo certbot certonly --standalone --preferred-challenges http --agree-tos --email emaileshoma@gmail.com -d sub.mydomain.ir
```
ุงูู ุฑู ูุฑฺ ุฏูุชูู ุฎูุงุณุช ุจุฒูุฏ ูู ุฏุงููู ุฑู ุฏุฑุณุช ูุงุฑุฏ ฺฉูุฏ ุ ููฺูู ุณุฑุชูฺฉุช ูุง ณ ูุงู ุงุนุชุจุงุฑ ุฏุงุฑู ู ุจุนุฏ ุงุฒ ณ ูุงู ุจุงุฏ ุฏุณุชูุฑ certbot renew ุฑู ุจุฒูุฏ ุชุง ุชูุฏุฏ ุจุดู

ุงู ุฏุณุชูุฑ ุจุฑุงุชูู ุณุฑุชูฺฉุช ูฺฏุฑู ู ุฏุฑ ุงูุชูุง ูุณุฑ ุฏู ุชุง ูุงู ุฑู ูุดูู ูุฏู ฺฉู ฺฉุฌุง ุฐุฎุฑู ุดุฏู

fullchain.pem ู privkey.pem ูุณุชูุฏ ุงูู ูุงู ูุง

ุงู ูุงู ูุงุฑู ุฌุง ุฏุงูููุฏ ฺฉูุฏ ุง ุฐุฎุฑู ฺฉูุฏ ู ุจูุชุฑู ูู ฺฉูุงุฑ ุฎูุฏ waterwall ูุฑุงุฑ ุจุฏุฏ ฺฉู ุชู ุฏุงุฏู ูุณุฑ ุงุด ุฏฺุงุฑ ูุดฺฉู ูุดุฏ

## ุงุฌุฑุง ุชุงูู Tls
ูุฑุถ ูฺฉูู ุดูุง ุงุฒ ุฏุงููู mydomain.ir ุงุณุชูุงุฏู ฺฉุฑุฏุฏ ู ุจุฑุงุด ุณุฑุชูฺฉุช ฺฏุฑูุชุฏ

ู ุงูพ ุณุฑูุฑ ุฎุงุฑุฌ ุดูุง ูู 1.1.1.1 ูุณุช

ุงู ุฑูุด ูุงุฒ ุจู ุงุฌุฑุง ุดุฏู waterwall ูู ุฏุฑ ุณุฑูุฑ ุงุฑุงู ุฏุงุฑู ู ูู ุฎุงุฑุฌ

---

## ุญุงูุช ุชฺฉ ูพูุฑุช ู ุฌุฏุง
ุงูุฌุง ูุฑุถ ูุดู ุดูุง ููู ฺฉุงุฑุจุฑูุงุชูู ุฑู ู ูพูุฑุช ุณุงุฎุชู ุดุฏู ู ุฏุฑ ุณุฑูุฑ ุฎุงุฑุฌ ูู ูพูู ูุตุจ ุดุฏู ู ุฏุฑุญุงู ุงุฌุฑุง ูุณุช ูพูุฑุช ฺฉุงุฑุจุฑ ูุง ูู ูุฑุถ ูฺฉูู 2083 ูุณุช

ุณุฑูุฑ ุงุฑุงู ุฑู ุชูุธู ูฺฉูู ฺฉู ฺฉุงุฑุจุฑ ูุง ุจู ูพูุฑุช 2083 ุณุฑูุฑ ุงุฑุงู ูุตู ุจุดู ุ ุณูพุณ ุณุฑูุฑ ุงุฑุงู ุจุง ูพูุฑุช ดดณ ฺฉู ุจูุชุฑู ูพูุฑุช ุจุฑุง tls ูุณุช ุจุง ุณุฑูุฑ ุฎุงุฑุฌ ุงุฑุชุจุงุท ุจฺฏุฑู

ู ุณูพุณ ุณุฑูุฑ ุฎุงุฑุฌ ฺฉุงฺฉุดู ุฑู ุงุฒ ูพูุฑุช ดดณ ุจฺฏุฑู ู ุจู ูพูู ฺฉู ฺฉุงุฑุจุฑูุงุฑู ุฑู ูพูุฑุช 2083 ุณุงุฎุชู ูุชุตู ฺฉูู

### ูููฺุงุฑุช ุญุงูุช ุชฺฉ ูพูุฑุช ู ุฌุฏุง

```mermaid
flowchart LR;
    user1 --> A1;
    user2 --> A1;
    user3 --> A1;
    subgraph Kharej;
    B1[443 Waterwall] --> B2;
    B1[443 Waterwall] --> B2;
    B1[443 Waterwall] --> B2;
    B2[2083 Xray];
    end;
    subgraph IRan;
    A1[2083 Waterwall] -- "TLS Handshake" --> B1;
    A1[2083 Waterwall] -- "TLS Handshake" --> B1;
    A1[2083 Waterwall] -- "TLS Handshake" --> B1;
    end;
```

#### ฺฉุงููฺฏ ุณุฑูุฑ ุงุฑุงู

```json
{
    "name": "tls_port_to_port",
    "nodes": [
        {
            "name": "input",
            "type": "TcpListener",
            "settings": {
                "address": "0.0.0.0",
                "port": 2083,
                "nodelay": true
            },
            "next": "mysslclient"
        },
        {
            "name": "mysslclient",
            "type": "OpenSSLClient",
            "settings": {
                "sni": "mydomain.ir",
                "verify": true,
                "alpn":"http/1.1"
            
            },
            "next": "output"
        },
        
        {
            "name": "output",
            "type": "TcpConnector",
            "settings": {
                "nodelay": true,
                "address": "1.1.1.1",
                "port": 443
            }
        }

    ]
}
```

#### ฺฉุงููฺฏ ุณุฑูุฑ ุฎุงุฑุฌ

```json
{
    "name": "tls_port_to_port_kharej",
    "nodes": [
        {
            "name": "input",
            "type": "TcpListener",
            "settings": {
                "address": "0.0.0.0",
                "port": 443,
                "nodelay": true
            },
            "next": "mysslserver"
        },
        {
            "name": "mysslserver",
            "type": "OpenSSLServer",
            "settings": {
                "cert-file": "fullchain.pem",
                "key-file": "privkey.pem",
                "alpns": [
                    {
                        "value": "h2",
                        "next": "node->next"
                    },
                    {
                        "value": "http/1.1",
                        "next": "node->next"
                    }
                ]

            },
            "next": "output"  
        },
        {
            "name": "output",
            "type": "TcpConnector",
            "settings": {
                "nodelay": true,
                "address": "127.0.0.1",
                "port": 2083
            }
        }

    ]
}
```
ุงูุฌูุฑ ุชููู ุชฺฉูู ูุดู ู ุจุนุฏ ุงุฌุฑุง ุดุฏู waterwall ุฏุฑ ุณุฑูุฑ ูุง ุจุงุฏ ุงุชุตุงู ุจุฑูุฑุงุฑ ุจุงุดู.


**ุฎูุจ ุญุงูุง ุจุฑู ุจุจูู ฺู ุชุบุฑุงุช ูุชููู ุจุฏู ๐ค**

ุงููู ฺุฒ ฺฉู ุจู ุฐูู ูู ูุฑุณู ุงูู ฺฉู ุ ูุง ุงูุงู ูพูุฑุช ดดณ ุฑู ุณุฑูุฑ ุฎุงุฑุฌ ุฑู ุงุฒ ุฏุณุช ุฏุงุฏู ุ ุงู ูพูุฑุช ุงูุชุงุฏู ุฏุณุช ุชููู ู ูพูุฑุช ฺฉุงุฑุจุฑ ูุง ูู ฒฐธณ ุจูุฏ

ุงูุง ุงฺฏู ูุซูุง ูุง ุฑู ุณุฑูุฑ ุฎุงุฑุฌ ฺฉุงุฑุจุฑูุงุฑู ุฑู ูพูุฑุช ดดณ ุณุงุฎุชู ุจูุฏู ฺุ ุฎู ูุง ุงูฺฉุงุฑู ูฺฉูู ุจุฑุง ุงูฺฉู ฺฉุงุฑุจุฑูุง ูุณุชูู ูู ุจุชููู ูุตู ุจุดู

ุงููููุช ุจุงุฏ ุจู ุชููู ุจฺฏู ุจุง ูพูุฑุช ฒฐธณ ุณุฑูุฑ ุฎุงุฑุฌ ูุชุตู ุจุดู ุฏุฑุณุชูุ

ุจูู ุฏุฑุณุชูุ ุงูุง ุจุงุฒู ฺฉูุช ุงุชุตุงู tls ููุช ุจุง ูพูุฑุช ดดณ ููุฏ ุดฺฉ ุจุดู ูู ุฎู ุจูุชุฑู ู ูู ุงุฒ ุฏุฏฺฏุงู ููุชุฑูฺฏ ุงุญุชูุงู ููุชุฑ ุดุฏูุด ุจู ุดุฏุช ฺฉูุชุฑูุ

ุงูุง ุณูุงู ุงูู ฺฉู ฺุทูุฑ ูพูุฑุช ดดณ ุฑู ูู ฺฉุงุฑุจุฑ ูุง ุงุณุชูุงุฏู ฺฉูู ููุช ูุณุชูู ูุตู ูุดู ุจู ุณุฑูุฑ ู ูู ุฎูุฏ ุชููู ุจุฑุง ุงุฑุชุจุงุท tls ุงุณุชูุงุฏู ฺฉููุ

ุจุฑุง ุงูฺฉุงุฑ ุ ุจุงุฏ ูพูุฑุช ฺฉุงุฑุจุฑ ูุงุฑู ุจุฒุงุฑู ู ูพูุฑุช ุฏฺฏู ุจู ุฌุฒ ดดณ ุงูุง ฺฉุงููฺฏ ูุงุดูู ุจุงุฏ ุจู ูููู ูพูุฑุช ดดณ ุงุดุงุฑู ฺฉูู ูพุณ ูพูุฑุช ุฑู ุฏุฑ ูพูู ูฺฉูู ฒฐธณ ุ ุณูพุณ ฺฉุงููฺฏ ูุงุชุฑ ูุงู ุฑู ุงูุฌูุฑ ุชุบุฑ ูุฏู:

ููุช ฺฉุงุฑุจุฑ ุจู ฺฉุงููฺฏ ุชููู ูุตู ุดุฏ:

user ---> (443) iran-server ---> (443) kharej-server-waterwall ---> 2083 kharej-server-xray

ููุช ุจู ฺฉุงููฺฏ ูุณุชูู ูุตู ุดุฏ:

user ---> (443) kharej-server-waterwall ---> 2083 kharej-server-xray

 
```mermaid
flowchart LR;
    user1 -- "Config Tunnel" --> A1;
    user2 -- "Config Tunnel" --> A1;
    user3 -- "Config Tunnel" --> A1;
    user4 -- "Config Direct" --> B1;
    user5 -- "Config Direct" --> B1;
    subgraph Kharej;
    B1[443 Waterwall] --> B2;
    B2[2083 Xray];
    end;
    subgraph IRan;
    A1[443] -- "TLS Handshake" --> B1;
    end;
```


#### ฺฉุงููฺฏ ุณุฑูุฑ ุงุฑุงู

```json
{
    "name": "tls_port_to_port_iran",
    "nodes": [
        {
            "name": "input",
            "type": "TcpListener",
            "settings": {
                "address": "0.0.0.0",
                "port": 443,
                "nodelay": true
                
            },
            "next": "mysslclient"
        },
        {
            "name": "mysslclient",
            "type": "OpenSSLClient",
            "settings": {
                "sni": "mydomain.ir",
                "verify": true,
                "alpn":"http/1.1"
            
            },
            "next": "output"
        },
        
        {
            "name": "output",
            "type": "TcpConnector",
            "settings": {
                "nodelay": true,
                "address": "1.1.1.1",
                "port": 443
            }
        }

    ]
}
```

#### ฺฉุงููฺฏ ุณุฑูุฑ ุฎุงุฑุฌ

> ุงูพ ุณุฑูุฑ ุงุฑุงู 2.2.2.2 ูุฑุถ ุดุฏู

```json
{
    "name": "tls_port_to_port_kharej",
    "nodes": [
        {
            "name": "input_direct_users",
            "type": "TcpListener",
            "settings": {
                "address": "0.0.0.0",
                "port": 443,
                "nodelay": true
            },
            "next": "output_direct_users"
        },
        {
            "name": "output_direct_users",
            "type": "TcpConnector",
            "settings": {
                "nodelay": true,
                "address": "127.0.0.1",
                "port": 2083
            }
        },

        {
            "name": "input_tunnel",
            "type": "TcpListener",
            "settings": {
                "address": "0.0.0.0",
                "port": 443,
                "nodelay": true,
                "whitelist": [
                    "2.2.2.2/32"
                ]
            },
            "next": "mysslserver"
        },
        {
            "name": "mysslserver",
            "type": "OpenSSLServer",
            "settings": {
                "cert-file": "fullchain.pem",
                "key-file": "privkey.pem",
                "alpns": [
                    {
                        "value": "h2",
                        "next": "node->next"
                    },
                    {
                        "value": "http/1.1",
                        "next": "node->next"
                    }
                ]

            },
            "next": "output_tunnel"  
        },
        {
            "name": "output_tunnel",
            "type": "TcpConnector",
            "settings": {
                "nodelay": true,
                "address": "127.0.0.1",
                "port": 2083
            }
        }
    ]
}
```

ุงูุทูุฑ ุฏฺฏู ูพูุฑุช ดดณ ูู ุจุฑุง ุชููู ุงุณุชูุงุฏู ุดุฏู ูู ฺฉุงุฑุจุฑ ูุชููู ูุณุชูู ูุตู ุดู ู ุงุณุชูุงุฏู ฺฉูู

ุงู ุญุฑฺฉุช ุฑู ุจุง ุฑูุด ูุง ุชููู ุฏฺฏู ุง ฺฉู ุจุง waterwall ูุฒูุฏ ูู ูุดู ุงูุฌุงู ุฏุงุฏ ู ุง ุญุช ุจุงุฒู ุฌุฏุง ุณุงุฒ ฺฉุฑุฏ ...

---
## ุญุงูุช ูุงูุช ูพูุฑุช

ุจุฑุง ุงูฺฉู ูุงู ุฎู ุทููุงู ูุดู ูู ุงู ุญุงูุช ุฑู ุณุงุฏู ุชูุถุญ ูุฏู ู ุงูู ุญุฑฺฉุช ฺฉู ุฒุฏู ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ูพูุฑุช ดดณ ุฑู ุจุง ุงู ุงุฏุบุงู ููฺฉูู ู ุฎูุฏุชูู ุจุง ูฺฏุงู ุจู ูุซุงู ฺฉุงููุง ูุชูุฌู ุดุฏู ฺุทูุฑ ูุดู ุงุฏุบุงูุด ฺฉุฑุฏ.

ุงูุฌุง ูุฎูุงูู ุงู ุญุงูุช ุฑู ุจุฑู ฺฉูุ ฺฉุงุจุฑ ุจู ูุฑูพูุฑุช ฺฉู ุฑู ุณุฑูุฑ ุงุฑุงู ูุตู ุดุฏุ ูุตู ูุดู ุจู ูููู ูพูุฑุช ุฑู ุณุฑูุฑ ุฎุงุฑุฌ ูุซู ูููู ุงูพ ุชุจู. ุงูุงุ ุชุจุงุฏู ุงุทูุงุนุงุช ุงุฒ ุทุฑู ฺฉุงูฺฉุดู tls ฺฉู waterwall ุณุฑูุฑ ุงุฑุงู ุจุง ูพูุฑุช ดดณ ุณุฑูุฑ ุฎุงุฑุฌ ุงูุฌุงู ุฏุงุฏูุ ุงูุฌุงู ุฎูุงูุฏ ุดุฏ.

ูพุณ ูพูุฑุช ดดณ ุฑู ุณุฑูุฑ ุฎุงุฑุฌ ุจุงุฏ ุฎุงู ุจุงุดูุ ุงฺฏู ุฑู ุงูู ูพูุฑุช ูู ูุฒุฑ ูุณุช ุจุงุฏ ุงูู ุญุฑฺฉุช ฺฉู ุจุงูุง ุฒุฏู ุฑู ุงุฏุบุงู ฺฉูุฏ.

### ูููฺุงุฑุช ุญุงูุช ูุงูุช ูพูุฑุช

```mermaid
flowchart LR;
    user1 -- "Config Tunnel" --> A1;
    user2 -- "Config Tunnel" --> A2;
    user3 -- "Config Tunnel" --> A3;
    user4 -- "Config Tunnel" --> A4;
    subgraph Kharej;
    B1[443 Waterwall] --> B2 & B3 & B4 & B5;
    B2[2053 Xray];
    B3[2083 Xray];
    B4[... Xray];
    B5[65535 Xray];
    end;
    subgraph IRan;
    A1[2053] -- "TLS Handshake" --> B1;
    A2[2083] -- "TLS Handshake" --> B1;
    A3[...] -- "TLS Handshake" --> B1;
    A4[65535] -- "TLS Handshake" --> B1;
    end;
```

#### ฺฉุงููฺฏ ุณุฑูุฑ ุงุฑุงู



```json
{
    "name": "tls_multiport_iran",
    "nodes": [
        {
            "name": "input",
            "type": "TcpListener",
            "settings": {
                "address": "0.0.0.0",
                "port": [23,65535],
                "nodelay": true
            },
            "next": "port_header"
        },
        {
            "name": "port_header",
            "type": "HeaderClient",
            "settings": {
                "data": "src_context->port"
            },
            "next": "sslclient"
        }, 
 
        {
            "name": "sslclient",
            "type": "OpenSSLClient",
            "settings": {
                "sni": "mydomain.ir",
                "verify": true,
                "alpn":"http/1.1"
            
            },
            "next": "output"
        },
        
        {
            "name": "output",
            "type": "TcpConnector",
            "settings": {
                "nodelay": true,
                "address": "1.1.1.1",
                "port": 443
            }
        }
    ]
}
```
ุงุฒ ุงููุฌุง ฺฉู ุณุฑูุฑ ุฎุงุฑุฌ ุฎุจุฑ ูุฏุงุฑู ฺฉู ฺฉุงุฑุจุฑ ุจู ฺฉุฏูู ูพูุฑุช ุณุฑูุฑ ุงุฑุงู ูุตู ุดุฏู ุจูุฏูุ ูุง ุจุงุฏ ุงู ุงุทูุงุนุงุช ุฑู ุจูุด ุจุฑุณููู ฺฉู header node ุงู ฺฉุงุฑ ุฑู ุงูุฌุง ุงูุฌุงู ุฏุงุฏู.


#### ฺฉุงููฺฏ ุณุฑูุฑ ุฎุงุฑุฌ

```json
{
    "name": "tls_multiport_kharej",
    "nodes": [
        {
            "name": "input",
            "type": "TcpListener",
            "settings": {
                "address": "0.0.0.0",
                "port": 443,
                "nodelay": true
            },
            "next": "sslserver"
        },

        {
            "name": "sslserver",
            "type": "OpenSSLServer",
            "settings": {
                "cert-file": "fullchain.pem",
                "key-file": "privkey.pem",
                "alpns": [
                    {
                        "value": "h2",
                        "next": "node->next"
                    },
                    {
                        "value": "http/1.1",
                        "next": "node->next"
                    }
                ],
                "fallback-intence-delay":0

            },
            "next": "port_header"
            
        },

        {
            "name":"port_header",
            "type": "HeaderServer",
            "settings": {
                "override": "dest_context->port"
            },
            "next": "output"

        },

        {
            "name": "output",
            "type": "TcpConnector",
            "settings": {
                "nodelay": true,
                "address":"127.0.0.1",
                "port":"dest_context->port"
            }
        }
    ]
}
```



ู ุจุนุฏ ุงุฒ ุงุฌุฑุง ุชุงูู ุจุฑูุฑุงุฑ ูุดู ู ุณุฑุนุช ุฏุงูููุฏ ู ฺฉูุง ููู ฺ ุฎูุจู ุงูุงุ ููุฏ ุดฺฉ ุชุงู ุฑู ูุดู ูพุงู ุชุฑ ูู ุขูุฑุฏ ฺฉู ุฏุฑ ุขููุฒุด ุจุนุฏ ูฺฏู ฺฺฉุงุฑ ฺฉูู ฺฉู ุฑู ูุฑ ุฑูุด ฺฉู ุงุณุชูุงุฏู ูฺฉููุ ููุฏ ุดฺฉ ุชุงู ฺฉูุชุฑุ ุญุช ุชุง ูุตู ุญุงูุช ุนุงุฏ ุฏุงุดุชู ุจุงุดู.

